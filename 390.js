"use strict";(self.webpackChunkdiscover_extension=self.webpackChunkdiscover_extension||[]).push([[390],{390(e,t,s){s.d(t,{MobileStorageManager:()=>o});var a=s(13908),i=s(78831);let S;try{const e=require("@react-native-async-storage/async-storage");S=e.default??e}catch{throw new Error("Please install @react-native-async-storage/async-storage in your app to use MobileStorageManager")}class o{constructor(){this.getStorageValue=async e=>{const t=await S.getItem(e);return t?JSON.parse(t):void 0},this.setStorageValue=async(e,t)=>{await S.setItem(e,JSON.stringify(t))},this.setActiveSessionKey=async e=>{await S.setItem(o.ACTIVE_SESSION_KEY,e)},this.removeStorageValue=async e=>{await S.removeItem(e)},this.storeSession=async(e,t=a.m1.DefaultSessionkey)=>{const s=(0,i.iq)(e);await this.setStorageValue(t,s);const S=await this.getStorageValue(o.ALL_SESSION_KEYS),r=Array.isArray(S)?S:[];r.includes(t)||(r.push(t),await this.setStorageValue(o.ALL_SESSION_KEYS,r)),await this.setStorageValue(o.ACTIVE_SESSION_KEY,t)},this.getSession=async(e=a.m1.DefaultSessionkey)=>this.getStorageValue(e),this.getActiveSessionKey=async()=>this.getStorageValue(o.ACTIVE_SESSION_KEY),this.getActiveSession=async()=>{const e=await this.getActiveSessionKey();return e?this.getSession(e):void 0},this.listSessionKeys=async()=>{const e=await this.getStorageValue(o.ALL_SESSION_KEYS);return Array.isArray(e)?e:[]},this.clearSession=async e=>{await this.removeStorageValue(e);const t=(await this.listSessionKeys()).filter(t=>t!==e);await this.setStorageValue(o.ALL_SESSION_KEYS,t),await this.getActiveSessionKey()===e&&await this.removeStorageValue(o.ACTIVE_SESSION_KEY)},this.clearAllSessions=async()=>{const e=await this.listSessionKeys();await Promise.all(e.map(e=>S.removeItem(e))),await this.removeStorageValue(o.ALL_SESSION_KEYS),await this.removeStorageValue(o.ACTIVE_SESSION_KEY)}}}o.ALL_SESSION_KEYS="@turnkey/all-session-keys",o.ACTIVE_SESSION_KEY="@turnkey/active-session-key"}}]);